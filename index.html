<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teaching Tools</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border);
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: var(--text-muted);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            color: var(--links);
            border-bottom-color: var(--links);
        }

        .tab:hover {
            color: var(--links);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .file-list {
            list-style: none;
            padding: 0;
        }

        .file-item {
            padding: 15px;
            margin: 10px 0;
            background: var(--background-alt);
            border: 1px solid var(--border);
            border-radius: 6px;
            transition: all 0.2s;
        }

        .file-item:hover {
            border-color: var(--links);
            transform: translateY(-2px);
        }

        .file-link {
            text-decoration: none;
            color: var(--links);
            font-weight: 600;
            font-size: 1.1em;
            display: block;
            margin-bottom: 5px;
        }

        .file-link:hover {
            text-decoration: underline;
        }

        .file-description {
            color: var(--text-muted);
            font-size: 0.9em;
        }

        .home-content {
            text-align: center;
            padding: 40px 20px;
        }

        .home-content h2 {
            color: var(--links);
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Teaching Tools</h1>
    <p>Resources for Year 4-5 Teaching</p>

    <div class="tabs" id="tabsContainer">
        <button class="tab active" data-tab="home">Home</button>
    </div>

    <!-- Home Tab -->
    <div id="home" class="tab-content active">
        <div class="home-content">
            <h2>Welcome to Teaching Tools</h2>
            <p>This is a collection of lesson tracking tools for primary school teachers.</p>
            <p>Use the tabs above to browse available resources.</p>
            <p>All tools are free to use and adapt for educational purposes.</p>
        </div>
    </div>

    <div id="dynamicContent"></div>

    <script>
        const username = 'jomolin';
        const repo = 'teaching-tools';

        async function loadRepoStructure() {
            try {
                const response = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/`);
                const items = await response.json();
                
                // Filter to only folders (ignore files like index.html, style.css, README.md, etc.)
                const folders = items.filter(item => item.type === 'dir');
                
                const tabsContainer = document.getElementById('tabsContainer');
                const dynamicContent = document.getElementById('dynamicContent');
                
                // Create tabs and content for each folder
                for (const folder of folders) {
                    // Create tab button
                    const tab = document.createElement('button');
                    tab.className = 'tab';
                    tab.dataset.tab = folder.name;
                    tab.textContent = folder.name.charAt(0).toUpperCase() + folder.name.slice(1);
                    tabsContainer.appendChild(tab);
                    
                    // Create tab content
                    const tabContent = document.createElement('div');
                    tabContent.id = folder.name;
                    tabContent.className = 'tab-content';
                    
                    // Fetch files in this folder
                    const folderResponse = await fetch(folder.url);
                    const files = await folderResponse.json();
                    
                    // Filter to HTML files only
                    const htmlFiles = files.filter(file => file.name.endsWith('.html'));
                    
                    if (htmlFiles.length > 0) {
                        tabContent.innerHTML = `
                            <h2>${folder.name.charAt(0).toUpperCase() + folder.name.slice(1)}</h2>
                            <ul class="file-list">
                                ${htmlFiles.map(file => {
                                    const displayName = file.name.replace('.html', '').replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                                    return `
                                        <li class="file-item">
                                            <a href="${folder.name}/${file.name}" class="file-link">${displayName}</a>
                                        </li>
                                    `;
                                }).join('')}
                            </ul>
                        `;
                    } else {
                        tabContent.innerHTML = `
                            <h2>${folder.name.charAt(0).toUpperCase() + folder.name.slice(1)}</h2>
                            <p>No HTML files found in this folder.</p>
                        `;
                    }
                    
                    dynamicContent.appendChild(tabContent);
                }
                
                setupTabSwitching();
                
            } catch (error) {
                console.error('Error loading repo structure:', error);
                document.getElementById('dynamicContent').innerHTML = '<p>Error loading folders. Make sure the repository is public.</p>';
            }
        }

        function setupTabSwitching() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and content
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                });
            });
        }

        // Load repo structure on page load
        loadRepoStructure();
    </script>
</body>
</html>
